import{u as k,r as l,c as S,a as j,P as b,j as r,b as e,l as P,U as T,d as E,e as O,f as U}from"./index.9811feaf.js";import{u as F}from"./useDispatch.3adb1526.js";const f="https://accessdb.blackgymfitclub.com/api/",I=f+"login",q=(n,t,i)=>{const c={username:n,password:t,idClub:i},d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};return fetch(I,d).then(a=>{if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return a.json()}).catch(a=>{throw console.error("Error:",a),a})},L=f+"getClubes",R=()=>fetch(L,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()}).catch(t=>{throw console.error("Error:",t),t});function H(){const n=F(),t=k(),[i,c]=l.exports.useState(""),[d,a]=l.exports.useState(""),[m,p]=l.exports.useState("1"),[g,x]=l.exports.useState([]);l.exports.useEffect(()=>{S(T),n(j()),t(`/${b.LOGIN}`,{replace:!0})},[]);const y=async s=>{s.preventDefault();try{const o=await q(i,d,m);n(E({...o})),t(`/${O.PRIVATE}`,{replace:!0})}catch(o){console.error("Error de inicio de sesi\xF3n:",o)}},v=s=>{const o=s.target.value;p(o);const w=parseInt(o,10),h=g.find(u=>u.idClub===w);if(h){const{idClub:u,nameClub:C,address:N}=h;n(U({...{idClub:u,nameClub:C,address:N}}))}else console.log("No se encontr\xF3 ning\xFAn club para el ID seleccionado")};return r("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",onLoad:async()=>{try{const{data:s}=await R();x(s)}catch(s){console.error("Error:",s)}},children:[r("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e("img",{className:"mx-auto h-16 w-auto",src:P,alt:"Your Company"}),e("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Bienvenido"})]}),e("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:r("form",{className:"space-y-6",children:[r("div",{children:[e("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-gray-900",children:"Usuario"}),e("div",{className:"mt-2",children:e("input",{id:"useranme",name:"username",type:"username",required:!0,value:i,onChange:s=>c(s.target.value),className:"block w-full pl-2 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),r("div",{children:[r("div",{className:"flex items-center justify-between",children:[e("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"}),e("div",{className:"text-sm",children:e("a",{href:b.FORGOTPASS,className:"text-gray-900 text-sm hover:text-indigo-500 hover:border-b",children:"Olvidaste tu contrase\xF1a?"})})]}),e("div",{className:"mt-2",children:e("input",{id:"password",name:"password",type:"password",required:!0,onChange:s=>a(s.target.value),className:"block w-full pl-2 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),r("div",{children:[e("label",{htmlFor:"idClub",className:"block text-sm font-medium leading-6 text-gray-900",children:"Club"}),e("div",{className:"mt-2",children:r("select",{id:"idClub",name:"idClub",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:m,onChange:v,children:[e("option",{value:"",children:"Selecciona una sucursal."}),g.map(s=>e("option",{value:s.idClub,children:s.nameClub},s.idClub))]})})]}),e("div",{children:e("button",{onClick:y,className:"flex w-full justify-center rounded-md bg-black px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Ingresar"})})]})})]})}export{H as default};
