import{u as F,r as n,c as P,a as O,P as f,j as o,b as e,l as U,U as T,d as I,e as q,f as A}from"./index.c63ee834.js";import{u as L}from"./useDispatch.6b5ede43.js";const b="https://accessdb.blackgymfitclub.com/api/",R=b+"login",D=(i,r,l)=>{const u={username:i,password:r,idClub:l},d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};return fetch(R,d).then(async t=>{if(!t.ok){const c=await t.json();throw new Error(c.message)}return t.json()}).then(t=>{if(t.error)throw new Error(t.message||"Error desconocido");return t}).catch(t=>{throw console.error("Error:",t),t})},G=b+"getClubes",$=()=>fetch(G,{method:"GET",headers:{"Content-Type":"application/json"}}).then(r=>{if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return r.json()}).catch(r=>{throw console.error("Error:",r),r});function J(){const i=L(),r=F(),[l,u]=n.exports.useState(""),[d,t]=n.exports.useState(""),[c,x]=n.exports.useState("1"),[h,w]=n.exports.useState(""),[g,v]=n.exports.useState([]),[y,C]=n.exports.useState(!1);n.exports.useEffect(()=>{P(T),i(O()),r(`/${f.LOGIN}`,{replace:!0})},[]);const N=async s=>{if(s.preventDefault(),!l||!d||!c){C(!0);return}try{const a=await D(l,d,c);i(I({...a})),r(`/${q.PRIVATE}`,{replace:!0})}catch(a){console.error("Error de inicio de sesi\xF3n:",a),w(a.message)}},E=s=>{const a=s.target.value;x(a);const S=parseInt(a,10),p=g.find(m=>m.idClub===S);if(p){const{idClub:m,nameClub:k,address:j}=p;i(A({...{idClub:m,nameClub:k,address:j}}))}else console.log("No se encontr\xF3 ning\xFAn club para el ID seleccionado")};return o("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",onLoad:async()=>{try{const{data:s}=await $();v(s)}catch(s){console.error("Error:",s)}},children:[o("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e("img",{className:"mx-auto h-16 w-auto",src:U,alt:"Your Company"}),e("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-white",children:"Bienvenido"})]}),e("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:o("form",{className:"space-y-6",children:[o("div",{children:[e("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-white",children:"Usuario"}),e("div",{className:"mt-2",children:e("input",{id:"username",name:"username",type:"text",required:!0,value:l,onChange:s=>u(s.target.value),className:"block w-full px-2 py-1.5 rounded-md border-0 shadow-sm ring-1 ring-inset ring-gray-300 placeholder-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),o("div",{children:[o("div",{className:"flex items-center justify-between",children:[e("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-white",children:"Password"}),e("div",{className:"text-sm",children:e("a",{href:f.FORGOTPASS,className:"text-white text-sm hover:text-indigo-500 hover:border-b",children:"Olvidaste tu contrase\xF1a?"})})]}),e("div",{className:"mt-2",children:e("input",{id:"password",name:"password",type:"password",required:!0,onChange:s=>t(s.target.value),className:"block w-full px-2 py-1.5 rounded-md border-0 shadow-sm ring-1 ring-inset ring-gray-300 placeholder-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),o("div",{children:[e("label",{htmlFor:"idClub",className:"block text-sm font-medium leading-6 text-white",children:"Club"}),e("div",{className:"mt-2",children:o("select",{id:"idClub",name:"idClub",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:c,onChange:E,children:[e("option",{value:"",children:"Selecciona una sucursal."}),g.map(s=>e("option",{value:s.idClub,children:s.nameClub},s.idClub))]})})]}),y&&e("div",{className:"text-red-600",children:"Por favor, complete todos los campos."}),h&&e("div",{className:"text-red-600",children:h}),e("div",{children:e("button",{onClick:N,className:"flex w-full justify-center rounded-md bg-white px-3 py-1.5 text-sm font-semibold leading-6 text-dark shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Ingresar"})})]})})]})}export{J as default};
